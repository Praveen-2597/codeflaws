# Codeflaws
The Codeflaws benchmark is a collection of C programs with 4085 defects. Each defect are  where the dataset is crawled from [Codeforces](http://codeforces.com/)

##Structure of each folder
Each folder is named using the following convention: 
&lt;contestid&gt;-&lt;problem&gt;-bug-&lt;buggy-submisionid&gt;-&lt;accepted-submissionid&gt;
Each folder contains:
- Buggy submission with name &lt;contestid&gt;-&lt;problem&gt;-&lt;buggy-submisionid&gt;.c
- Accepted submission with name &lt;contestid&gt;-&lt;problem&gt;-&lt;accepted-submisionid&gt;.c
- Two sets of test scripts: 
  1. Repair Test script (test suite given to repair tools for generating repair): test-genprog.sh is for search-based repair tools (GenProg, SPR, Prophet), test-angelix.sh is for Angelix as it requires inserting special instrumentation.
  2. Test script for patch validation (held-out test suite): test-genprog-valid.sh is for validating search-based repair tools (GenProg, SPR, Prophet), test-angelix.sh is for validating Angelix    
- Test input files: input[0-9]+ file used by Test suite (1), and  heldout-input[0-9]+ file used by Test suite (2)
- Test output files: output[0-9]+ file used by Test suite (1), and  heldout-output[0-9]+ file used by Test suite (2)
- Makefile for compiling the buggy submission. This contains the CFLAGS options recommended by Codeforces. To compile the accepted submission, use the command `make FILENAME=10-A-13543524`
- Makefile.genprog for compiling the buggy submission using cilly. This is for GenProg experiments as GenProg works on CIL representation.
- Test configuration for SPR that specify the name for pass/fail test: &lt;contestid&gt;-&lt;problem&gt;-&lt;buggy-submisionid&gt;.c.revlog

Due to the following error for the version 10-D-bug-1434543-1434549 and 674-E-bug-17842470-17842486, we have placed the archive file for these two versions in github repository:
remote: error: File ... is 732.30 MB; this exceeds GitHub's file size limit of 100.00 MB

Use the following command for extracting the two versions:
```{r, engine='bash', count_lines}
tar -zxvf 10-D-bug-1434543-1434549.tar.gz
tar -zxvf 674-E-bug-17842470-17842486.tar.gz
```

##Script for running each repair tool
###SPR
Use the following files for running SPR:
- File for compilation configuration: code-build.py 
- File for test configuration: run-test.py
- File for running SPR: run-version-spr.sh
- File for validating patches generated by SPR (This script is called from run-version-spr.sh): validate-fix-spr.sh 

##Other information
For more information/questions about the benchmark, refer to the following website:
https://codeflaws.github.io/
